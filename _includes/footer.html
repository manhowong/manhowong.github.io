{% assign plang = page.lang | default: site.langs[0] | default: "en" %}
{% assign i18n = site.data.academic_i18n %}

<footer class="site-footer">
  <canvas id="waves"></canvas>
  <div class="wrapper">

      <ul class="footer-col footer-col-1">
        <li>
          <!-- {% include _i18n/sitetitle.html %} -->

        {% if site.author_display %}
        <span class="author">
          {{ i18n.by[plang] }}
          {% if site.author_website %}
          <a target="_blank" href="{% include _i18n/i18n.html value=site.author_website %}">{{ site.author }}</a>
          {% else %}
          {{ site.author }}
          {% endif %}
        </span>
        </li>
        {% endif %}

        {% if site.description %}
        <li>{% include _i18n/i18n.html value=site.description %}</li>
        {% endif %}

      </ul>

      {% if site.pitch %}
        <nav>
        {% include nav_menu.html class="footer-col footer-col-2"%}
        {% include contactlist.html class="single-col" %}
        </nav>
      {% else %}
        {% include contactlist.html class="footer-col footer-col-2" %}
      {% endif %}

    <div class="bottom">

      {% assign nblangs = site.langs | size %}
      {% if nblangs > 1 %}
        {% include _i18n/lang_selector.html %}
      {% endif %}

      <div class="tech">
        <!-- <a target="_blank" href="https://jekyllrb.com/">Jekyll</a> + <a target="_blank" href="https://github.com/gaalcaras/academic">Academic</a>
        {% if site.repo %}
        + <a target="_blank" href="{{ site.repo }}">Source</a>
        {% endif %} -->
        <a href="/imprint">Imprint</a>
      </div>

      <div class="legal">
      {% if site.cc == null %}©{% endif %}
      {% include _i18n/sitetitle.html %}
      {% assign oldest_post = site.posts reversed | first %}
      {% assign oldest = oldest_post.date | date: "%Y" %}
      {% assign newest = site.time | date: "%Y" %}
      ({% if oldest != newest %}{{ oldest }}-{% endif %}{{ newest }})
      {% if site.author and site.author_display %}
        {{ i18n.legal[plang][0] }}
        <a target="_blank" href="{% include _i18n/i18n.html value=site.author_website %}">{{ site.author }}</a> 
      {% endif %}
      {% if site.cc %}
        {{ i18n.legal[plang][1] }}
        <a target="_blank" rel="license" href="https://creativecommons.org/licenses/{{ site.cc }}/4.0/" class="cc-licence">
          CC {{ site.cc }}
        </a>
      {% endif %}
     </div>
    </div>

  </div>
</footer>

{% if page.layout == "post" %}
<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
{% endif %}

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.min.js" integrity="sha384-IDwe1+LCz02ROU9k972gdyvl+AESN10+x7tBKgc9I5HFtuNz0wWnPclzo6p9vxnk" crossorigin="anonymous"></script>


<script>
let canvas, H, W, ctx, wave, wave2, wave3, theta, start, end, ampl,a1,a2,a3;

window.onload = () => {
  canvas = document.getElementById("waves")
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  ctx = canvas.getContext("2d");
  
  W = window.innerWidth;
  H = window.innerHeight;
  
  wave = {
    y:H*0.66,
    length: 100000,
    amplitude: H*0.12,
    speed: 0.02
  };
  
    wave2 = {
    y:H*0.66,
    length: 200000,
    amplitude: H*0.08,
    speed: 0.04
  };
  
    wave3 = {
    y:H*0.66,
    length: 800000,
    amplitude: H*0.04,
    speed: 0.16
  };

  theta = 0;
  theta2 = 90;
  theta3 = 90;
  window.requestAnimationFrame(animation);
};

function animation(timestamp) {
  window.requestAnimationFrame(animation);

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  ctx.beginPath();
  ctx.moveTo(0,H*0.66);
  ctx.strokeStyle = `rgba(0, 204, 92, 0.5)`;
  ctx.lineWidth = 0.5;
  start = W*0.05;
  end = W*0.95;
  
  // wave
  ctx.beginPath();
  ctx.moveTo(0,H*0.66);
  ampl = 0;
  for (let i = 0; i < W; i+=6) {
    if (i > start && i <= W/2) {
      ampl = wave.amplitude*((i-start)/(W/2-start));
    } else if (i > W/2 && i < end) {
      ampl = wave.amplitude*((end-i)/(end-W/2));
    } else {
      ampl = 0;
    }
    ctx.lineTo(i, wave.y + Math.sin(i * wave.length + theta) * ampl);
  }
  ctx.stroke();
  theta += wave.speed;
  
  // wave2
  ctx.beginPath();
  ctx.moveTo(0,H*0.66);
  ampl = 0;
  for (let i = 0; i < W; i++) {
    if (i > start && i <= W/2) {
      ampl = wave2.amplitude*((i-start)/(W/2-start));
    } else if (i > W/2 && i < end) {
      ampl = wave2.amplitude*((end-i)/(end-W/2));
    } else {
      ampl = 0;
    }
    ctx.lineTo(i, wave2.y + Math.sin(i * wave2.length + theta2) * ampl);
  }
  ctx.stroke();
  theta2 += wave2.speed;
  
  // wave3
  ctx.beginPath();
  ctx.moveTo(0,H*0.66);
  ampl = 0;
  for (let i = 0; i < W; i++) {
    if (i > start && i <= W/2) {
      ampl = wave3.amplitude*((i-start)/(W/2-start));
    } else if (i > W/2 && i < end) {
      ampl = wave3.amplitude*((end-i)/(end-W/2));
    } else {
      ampl = 0;
    }
    ctx.lineTo(i, wave3.y + Math.sin(i * wave3.length + theta3) * ampl);
  }
  ctx.stroke();
  theta3 += wave3.speed;
  
  // combined
  ctx.beginPath();
  ctx.lineWidth = 1.5;
  ctx.moveTo(0,H*0.66);
  a1 = 0;
  a2 = 0;
  a3 = 0;
  for (let i = 0; i < W; i+=2) {
    if (i > start && i <= W/2) {
      a1 = wave.amplitude*((i-start)/(W/2-start));
      a2 = wave2.amplitude*((i-start)/(W/2-start));
      a3 = wave3.amplitude*((i-start)/(W/2-start));
    } else if (i > W/2 && i < end) {
      a1 = wave.amplitude*((end-i)/(end-W/2));
      a2 = wave2.amplitude*((end-i)/(end-W/2));
      a3 = wave3.amplitude*((end-i)/(end-W/2));
    } else {
      a1 = 0;
      a2 = 0;
      a3 = 0;
    }
    y1 = Math.sin(i * wave.length + theta) * a1;
    y2 = Math.sin(i * wave2.length + theta2) * a2;
    y3 = Math.sin(i * wave3.length + theta3) * a3;
    ctx.lineTo(i, wave.y + y1+y2+y3);
  }
  ctx.stroke();
  theta += wave.speed;
  theta2 += wave2.speed;
  theta3 += wave3.speed;
}

</script>